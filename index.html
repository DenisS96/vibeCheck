<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VibeCheck - Samen Beslissen & Besparen</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & Babel -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @keyframes loading { from { width: 0%; } to { width: 100%; } }
        .animate-loading { animation: loading 5s linear; }
        body { -webkit-tap-highlight-color: transparent; font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #f8fafc; }
        .no-scroll { overflow: hidden; height: 100vh; }
        .vibe-card { transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .vibe-card:active { transform: scale(0.95); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        // Firebase CDN Imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
        import { getFirestore, doc, setDoc, onSnapshot, updateDoc, arrayUnion, getDoc } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, linkWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAZPIbmsy48MjRGElG7BpNxyiR9ydlvl-k",
            authDomain: "vibecheck-4f630.firebaseapp.com",
            projectId: "vibecheck-4f630",
            storageBucket: "vibecheck-4f630.firebasestorage.app",
            messagingSenderId: "995143530772",
            appId: "1:995143530772:web:f2aedbd148a51170d46a01",
            measurementId: "G-5VP59GQVE0"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = "vibecheck-production";

        const TMDB_BEARER_TOKEN = "eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxYWYzYWIzYzk1NTk0MmM5YjA3ZmQyYmU5NGFhYjk1MCIsIm5iZiI6MTc2NjY2MjkxOC4wNDQsInN1YiI6IjY5NGQyMzA2YzQxZDgxZDE5NjA3MjgzZSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.nGJ_aApJYY2CMY7BdTubYCjXxsYYZOt4_2LHiXgEUJc";

        const { useState, useEffect } = React;

        // Iconenset om fouten te voorkomen
        const Icon = ({ name, size = 24, className = "", fill = "none", strokeWidth = 2 }) => {
            const icons = {
                heart: <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.505 4.046 3 5.5L12 21l7-7z" />,
                x: <path d="M18 6 6 18M6 6l12 12" />,
                users: <><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" /><circle cx="9" cy="7" r="4" /><path d="M22 21v-2a4 4 0 0 0-3-3.87" /><path d="M16 3.13a4 4 0 0 1 0 7.75" /></>,
                utensils: <><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2" /><path d="M7 2v20" /><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7" /></>,
                wallet: <><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4" /><path d="M3 5v14a2 2 0 0 0 2 2h16v-5" /><path d="M18 12a2 2 0 0 0 0 4h4v-4Z" /></>,
                coins: <><circle cx="8" cy="8" r="6" /><circle cx="16" cy="16" r="6" /><path d="M12 12c0-3 2.5-5.5 5.5-5.5" /><path d="M6.5 17.5c3 0 5.5-2.5 5.5-5.5" /></>,
                play: <path d="m6 3 14 9-14 9V3z" />,
                chevronRight: <polyline points="9 18 15 12 9 6" />,
                ticket: <path d="M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z" />,
                shield: <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />,
                lock: <><rect width="18" height="11" x="3" y="11" rx="2" ry="2" /><path d="M7 11V7a5 5 0 0 1 10 0v4" /></>,
                info: <><circle cx="12" cy="12" r="10" /><path d="M12 16v-4" /><path d="M12 8h.01" /></>,
                trash: <><path d="M3 6h18" /><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6" /><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" /></>,
                film: <><rect width="18" height="18" x="3" y="3" rx="2" /><path d="M7 3v18" /><path d="M17 3v18" /><path d="M3 7h4" /><path d="M3 12h4" /><path d="M3 17h4" /><path d="M17 7h4" /><path d="M17 12h4" /><path d="M17 17h4" /></>,
                check: <path d="M20 6 9 17l-5-5" />,
                award: <><circle cx="12" cy="8" r="6" /><path d="M15.477 12.89 17 22l-5-3-5 3 1.523-9.11" /></>
            };
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" className={className}>
                    {icons[name] || null}
                </svg>
            );
        };

        function App() {
            const [user, setUser] = useState(null);
            const [isAnonymous, setIsAnonymous] = useState(true);
            const [view, setView] = useState('landing'); 
            const [balance, setBalance] = useState(0);
            const [roomCode, setRoomCode] = useState('');
            const [roomData, setRoomData] = useState(null);
            const [currentIndex, setCurrentIndex] = useState(0);
            const [isWatchingAd, setIsWatchingAd] = useState(false);
            const [isLoadingData, setIsLoadingData] = useState(false);
            const [vouchers, setVouchers] = useState([]);
            const [lastClaimedCode, setLastClaimedCode] = useState('');

            useEffect(() => {
                const unsubscribeAuth = onAuthStateChanged(auth, (u) => {
                    if (u) {
                        setUser(u);
                        setIsAnonymous(u.isAnonymous);
                    } else {
                        signInAnonymously(auth).catch(err => console.error("Login mislukt:", err));
                    }
                });
                return () => unsubscribeAuth();
            }, []);

            useEffect(() => {
                if (!user) return;
                
                const walletRef = doc(db, 'artifacts', appId, 'users', user.uid, 'data', 'wallet');
                const unsubWallet = onSnapshot(walletRef, (snap) => {
                    if (snap.exists()) {
                        const data = snap.data();
                        setBalance(data.balance || 0);
                        setVouchers(data.vouchers || []);
                    } else {
                        // STARTKAPITAAL OP ‚Ç¨0.00
                        setDoc(walletRef, { balance: 0.00, vouchers: [], createdAt: Date.now() });
                    }
                }, (err) => console.error("Wallet sync fout:", err));

                let unsubRoom = () => {};
                if (roomCode) {
                    const roomRef = doc(db, 'artifacts', appId, 'public', 'data', 'rooms', roomCode);
                    unsubRoom = onSnapshot(roomRef, (snap) => {
                        if (snap.exists()) {
                            const data = snap.data();
                            setRoomData(data);
                            const pCount = data.participants.length;
                            const votes = data.votes || {};
                            const matchId = Object.keys(votes).find(id => votes[id].length === pCount && pCount > 1);
                            if (matchId) setView('match');
                        }
                    }, (err) => console.error("Room sync fout:", err));
                }
                return () => { unsubWallet(); unsubRoom(); };
            }, [user, roomCode]);

            const fetchRealData = async (category) => {
                if (category === 'movies') {
                    try {
                        setIsLoadingData(true);
                        const response = await fetch(`https://api.themoviedb.org/3/movie/popular?language=nl-NL&page=1`, {
                            headers: {
                                accept: 'application/json',
                                Authorization: `Bearer ${TMDB_BEARER_TOKEN}`
                            }
                        });
                        const data = await response.json();
                        setIsLoadingData(false);
                        return data.results.slice(0, 15).map(m => ({
                            id: m.id.toString(),
                            name: m.title,
                            desc: m.overview ? (m.overview.substring(0, 120) + "...") : "Geen beschrijving beschikbaar.",
                            img: m.poster_path ? `https://image.tmdb.org/t/p/w500${m.poster_path}` : 'https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=400'
                        }));
                    } catch (err) {
                        setIsLoadingData(false);
                        return [{ id: 'err', name: 'Laden mislukt', desc: 'Controleer je internet.', img: '' }];
                    }
                }
                return [
                    { id: 'f1', name: 'Sushi Express', desc: 'Verse maki en nigiri.', img: 'https://images.unsplash.com/photo-1579871494447-9811cf80d66c?w=400' },
                    { id: 'f2', name: 'Pizza Palace', desc: 'Klassieke houtoven pizza\'s.', img: 'https://images.unsplash.com/photo-1513104890138-7c749659a591?w=400' }
                ];
            };

            const handleCreateRoom = async (cat) => {
                const fetchedItems = await fetchRealData(cat);
                const code = Math.random().toString(36).substring(2, 7).toUpperCase();
                const roomRef = doc(db, 'artifacts', appId, 'public', 'data', 'rooms', code);
                await setDoc(roomRef, {
                    code, category: cat, participants: [user.uid], votes: {}, items: fetchedItems, createdAt: Date.now()
                });
                setRoomCode(code);
                setView('lobby');
            };

            const handleJoinRoom = async (code) => {
                if (!code) return;
                const roomRef = doc(db, 'artifacts', appId, 'public', 'data', 'rooms', code.toUpperCase());
                const snap = await getDoc(roomRef);
                if (snap.exists()) {
                    await updateDoc(roomRef, { participants: arrayUnion(user.uid) });
                    setRoomCode(code.toUpperCase());
                    setView('lobby');
                } else { alert("Kamer niet gevonden."); }
            };

            const handleVote = async (isLike) => {
                if (!roomData) return;
                const items = roomData.items || [];
                const currentItem = items[currentIndex];
                if (isLike) {
                    const roomRef = doc(db, 'artifacts', appId, 'public', 'data', 'rooms', roomCode);
                    await updateDoc(roomRef, { [`votes.${currentItem.id}`]: arrayUnion(user.uid) });
                }
                if (currentIndex < items.length - 1) {
                    setCurrentIndex(currentIndex + 1);
                } else { setView('waiting'); }
            };

            // VERBETERDE VIDEO-AD SIMULATIE
            const handleWatchAd = () => {
                setIsWatchingAd(true);
                setTimeout(async () => {
                    const walletRef = doc(db, 'artifacts', appId, 'users', user.uid, 'data', 'wallet');
                    const snap = await getDoc(walletRef);
                    const currentBal = snap.exists() ? snap.data().balance : balance;
                    await updateDoc(walletRef, { balance: currentBal + 0.15 });
                    setIsWatchingAd(false);
                }, 5000); // Video duurt 5 seconden
            };

            const handleClaimVoucher = async () => {
                if (balance < 5) return;
                const newCode = "TAKE-" + Math.random().toString(36).substring(2, 8).toUpperCase();
                const walletRef = doc(db, 'artifacts', appId, 'users', user.uid, 'data', 'wallet');
                await updateDoc(walletRef, { balance: balance - 5, vouchers: arrayUnion(newCode) });
                setLastClaimedCode(newCode);
                setView('voucher_success');
            };

            // VERBETERDE KOPPEL LOGICA
            const handleSecureAccount = async () => {
                const provider = new GoogleAuthProvider();
                provider.setCustomParameters({ prompt: 'select_account' });
                
                try {
                    await linkWithPopup(auth.currentUser, provider);
                    setIsAnonymous(false);
                    alert("Account succesvol beveiligd!");
                } catch (error) { 
                    console.error("Fout bij koppelen:", error);
                    if (error.code === 'auth/unauthorized-domain') {
                        const host = window.location.hostname;
                        alert("BEVEILIGINGSFOUT: Je moet '" + host + "' toevoegen aan je 'Authorized domains' in Firebase Console (Authentication > Settings).");
                    } else if (error.code === 'auth/credential-already-in-use') {
                        alert("Dit Google-account is al gekoppeld aan een andere VibeCheck-gebruiker.");
                    } else {
                        alert("Koppelen mislukt: " + error.message);
                    }
                }
            };

            if (!user) return <div className="h-screen flex items-center justify-center font-black text-indigo-600 animate-pulse text-2xl">VIBECHECK</div>;

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-900 flex flex-col max-w-md mx-auto shadow-2xl relative border-x border-slate-200 overflow-hidden">
                    <header className="p-4 bg-white border-b flex justify-between items-center sticky top-0 z-30">
                        <h1 onClick={() => setView('landing')} className="text-xl font-black text-indigo-600 cursor-pointer tracking-tighter uppercase italic leading-none">VIBECHECK</h1>
                        <div onClick={() => setView('wallet')} className="bg-green-50 text-green-700 px-4 py-1.5 rounded-2xl border border-green-100 flex items-center space-x-2 cursor-pointer active:scale-95 transition-all">
                            <Icon name="wallet" size={16} />
                            <span className="font-bold text-sm">‚Ç¨{balance.toFixed(2)}</span>
                        </div>
                    </header>

                    <main className="flex-1 p-6 overflow-y-auto pb-24">
                        {view === 'landing' && (
                            <div className="space-y-6 animate-in fade-in">
                                <div className="bg-indigo-600 p-8 rounded-[2.5rem] text-white shadow-xl relative overflow-hidden">
                                    <h2 className="text-2xl font-black mb-2 leading-tight uppercase">Swipe & Save. üçø</h2>
                                    <p className="text-indigo-100 text-sm mb-6">Beslis samen wat jullie gaan doen en spaar direct voor korting op je eten.</p>
                                    <div className="grid grid-cols-2 gap-4">
                                        <button onClick={() => handleCreateRoom('food')} className="bg-white/20 p-5 rounded-2xl flex flex-col items-center font-bold active:scale-95 transition-transform vibe-card">
                                            <Icon name="utensils" className="mb-2" />
                                            Eten
                                        </button>
                                        <button onClick={() => handleCreateRoom('movies')} className="bg-white/20 p-5 rounded-2xl flex flex-col items-center font-bold active:scale-95 transition-transform vibe-card">
                                            {isLoadingData ? <Icon name="loader" className="animate-spin mb-2" /> : <Icon name="film" className="mb-2" />}
                                            Films
                                        </button>
                                    </div>
                                </div>

                                <div onClick={() => setView('wallet')} className="bg-white p-6 rounded-[2rem] border border-slate-100 flex items-center justify-between shadow-sm cursor-pointer hover:border-indigo-200 transition-colors group">
                                    <div className="flex items-center space-x-4">
                                        <div className="bg-indigo-50 p-3 rounded-2xl text-indigo-600 group-hover:scale-110 transition-transform">
                                            <Icon name="coins" size={24} />
                                        </div>
                                        <div className="text-left">
                                            <h3 className="font-bold text-sm">Portemonnee spekken?</h3>
                                            <p className="text-[10px] text-slate-500 uppercase font-black tracking-widest leading-none">Bekijk advertenties voor saldo</p>
                                        </div>
                                    </div>
                                    <div className="bg-indigo-600 text-white p-2 rounded-xl shadow-lg group-active:scale-90 transition-all">
                                        <Icon name="chevronRight" size={20} strokeWidth={3} />
                                    </div>
                                </div>

                                <div className="pt-4 space-y-3">
                                    <p className="text-[10px] font-bold text-slate-400 uppercase tracking-widest text-center">Of join een kamer</p>
                                    <div className="flex space-x-2">
                                        <input 
                                            type="text" 
                                            placeholder="VOER CODE IN" 
                                            className="flex-1 bg-white border-2 border-slate-100 rounded-2xl p-4 font-mono font-bold text-center outline-none focus:border-indigo-500 transition-all uppercase"
                                            onChange={(e) => setRoomCode(e.target.value.toUpperCase())}
                                        />
                                        <button onClick={() => handleJoinRoom(roomCode)} className="bg-slate-900 text-white px-6 rounded-2xl font-bold active:scale-95">JOIN</button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {view === 'lobby' && (
                            <div className="flex flex-col items-center py-10 space-y-8 animate-in slide-in-from-bottom">
                                <h2 className="text-3xl font-black">De Lobby</h2>
                                <div className="bg-indigo-50 px-8 py-5 rounded-[2.5rem] border-2 border-dashed border-indigo-200 text-center relative">
                                    <p className="text-4xl font-mono font-black text-indigo-600 tracking-widest">{roomCode}</p>
                                </div>
                                <p className="text-center text-slate-500 text-sm">Wacht op je vrienden om te beginnen.</p>
                                <button onClick={() => setView('swiping')} className="w-full bg-indigo-600 text-white py-5 rounded-[2.5rem] text-xl font-bold shadow-xl active:scale-95 transition-all">START SWIPEN</button>
                            </div>
                        )}

                        {view === 'swiping' && roomData && (
                            <div className="h-full flex flex-col space-y-4 animate-in fade-in">
                                <div className="flex-1 bg-white rounded-[3rem] shadow-2xl overflow-hidden border border-slate-100 flex flex-col">
                                    <img src={roomData.items[currentIndex].img} className="h-1/2 w-full object-cover" alt="Item" />
                                    <div className="p-8 text-center flex-1 flex flex-col justify-center">
                                        <h3 className="text-2xl font-black mb-2 leading-tight">{roomData.items[currentIndex].name}</h3>
                                        <p className="text-slate-500 text-sm leading-relaxed">{roomData.items[currentIndex].desc}</p>
                                    </div>
                                    <div className="p-8 flex justify-center space-x-6 pb-12">
                                        <button onClick={() => handleVote(false)} className="w-16 h-16 rounded-full bg-white border border-slate-100 text-red-500 flex items-center justify-center shadow-xl text-3xl font-bold active:scale-90 transition-transform">‚úï</button>
                                        <button onClick={() => handleVote(true)} className="w-16 h-16 rounded-full bg-indigo-600 text-white flex items-center justify-center shadow-xl text-3xl font-bold active:scale-90 transition-transform">‚ô•</button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {view === 'match' && roomData && (
                            <div className="text-center space-y-8 py-10 animate-in zoom-in">
                                <Icon name="award" size={64} className="mx-auto text-yellow-500 animate-bounce" />
                                <h2 className="text-5xl font-black italic tracking-tighter text-indigo-600 leading-none">MATCH!</h2>
                                <div className="bg-white rounded-[2.5rem] shadow-2xl border-4 border-yellow-400 overflow-hidden transform rotate-2 mx-2">
                                    {(() => {
                                        const votes = roomData.votes || {};
                                        const matchId = Object.keys(votes).find(id => votes[id].length === roomData.participants.length);
                                        const item = roomData.items.find(i => i.id === matchId) || roomData.items[0];
                                        return (
                                            <>
                                                <img src={item.img} className="h-56 w-full object-cover" alt="Matched" />
                                                <div className="p-6">
                                                    <h3 className="text-2xl font-black mb-4">{item.name}</h3>
                                                    <button className="w-full bg-green-500 text-white py-4 rounded-2xl font-black shadow-lg uppercase">Korting Pakken</button>
                                                </div>
                                            </>
                                        );
                                    })()}
                                </div>
                                <button onClick={() => setView('landing')} className="text-indigo-600 font-bold bg-indigo-50 px-8 py-3 rounded-2xl active:scale-95 transition-transform">Opnieuw beginnen</button>
                            </div>
                        )}

                        {view === 'wallet' && (
                            <div className="space-y-6 animate-in slide-in-from-right">
                                <div className="bg-white p-8 rounded-[2.5rem] shadow-xl text-center border border-slate-50 relative overflow-hidden">
                                    <Icon name="coins" size={32} className="mx-auto text-green-500 mb-2" />
                                    <p className="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1">Actueel Saldo</p>
                                    <h2 className="text-5xl font-black text-slate-900">‚Ç¨{balance.toFixed(2)}</h2>
                                    {balance < 5 && (
                                        <div className="mt-4 px-4">
                                            <div className="w-full h-2 bg-slate-100 rounded-full overflow-hidden">
                                                <div className="h-full bg-green-500 transition-all duration-700" style={{width: `${Math.min((balance/5)*100, 100)}%`}}></div>
                                            </div>
                                            <p className="text-[10px] text-slate-400 mt-2 font-bold uppercase tracking-tighter text-center">Nog ‚Ç¨{Math.max(5-balance, 0).toFixed(2)} tot je ‚Ç¨5 voucher</p>
                                        </div>
                                    )}
                                </div>
                                <div className="bg-white p-5 rounded-3xl border border-slate-100 shadow-sm flex items-center justify-between">
                                    <div className="flex items-center space-x-3 text-left">
                                        {isAnonymous ? <Icon name="lock" className="text-orange-400" size={20}/> : <Icon name="shield" className="text-green-500" size={20}/>}
                                        <div>
                                            <h4 className="text-sm font-bold leading-tight">{isAnonymous ? "Gast Account" : "Beveiligd"}</h4>
                                            <p className="text-[9px] text-slate-400 leading-none">Koppel Google om nooit saldo te verliezen.</p>
                                        </div>
                                    </div>
                                    {isAnonymous && <button onClick={handleSecureAccount} className="bg-indigo-600 text-white px-4 py-2 rounded-xl text-xs font-black active:scale-90 transition-transform shadow-md">KOPPEL</button>}
                                </div>
                                <button onClick={handleWatchAd} disabled={isWatchingAd} className="w-full bg-slate-900 text-white p-5 rounded-[2.5rem] font-black shadow-xl disabled:opacity-50 active:scale-95 transition-transform flex items-center justify-center">
                                    <Icon name="play" size={18} className="mr-2" />
                                    {isWatchingAd ? 'Video speelt af...' : 'Kijk Video (+ ‚Ç¨0,15)'}
                                </button>
                                <button onClick={handleClaimVoucher} disabled={balance < 5} className={`w-full p-5 rounded-[2.5rem] font-black border-2 transition-all flex items-center justify-center ${balance >= 5 ? 'bg-green-500 text-white border-green-500 shadow-xl active:scale-95' : 'bg-white text-slate-200 border-slate-100'}`}>
                                    <Icon name="ticket" size={18} className="mr-2" />
                                    Claim ‚Ç¨5 Voucher
                                </button>
                                <div className="space-y-2">
                                    <h3 className="text-[10px] font-black text-slate-400 uppercase tracking-widest px-2 text-left">Eerder geclaimd</h3>
                                    {vouchers.map((code, i) => (
                                        <div key={i} className="bg-white p-4 rounded-2xl border border-dashed border-slate-300 flex justify-between items-center animate-in fade-in">
                                            <span className="font-mono font-bold text-indigo-600 tracking-wider uppercase">{code}</span>
                                            <span className="text-[10px] bg-green-100 text-green-700 px-2 py-1 rounded-lg font-black uppercase">Actief</span>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {view === 'voucher_success' && (
                            <div className="text-center space-y-8 py-10 animate-in zoom-in">
                                <Icon name="check" size={64} className="mx-auto text-green-500" />
                                <h2 className="text-3xl font-black tracking-tight uppercase italic">Code Gereed!</h2>
                                <div className="bg-slate-900 text-white p-8 rounded-[2.5rem] shadow-2xl relative overflow-hidden">
                                    <p className="text-[10px] text-slate-400 uppercase mb-2 font-black tracking-[0.3em]">Jouw Voucher</p>
                                    <p className="text-4xl font-mono font-black text-yellow-400 tracking-widest uppercase select-all">{lastClaimedCode}</p>
                                </div>
                                <button onClick={() => setView('wallet')} className="bg-indigo-50 text-indigo-600 px-8 py-4 rounded-2xl font-bold active:scale-95 transition-all">Terug naar Wallet</button>
                            </div>
                        )}

                        {view === 'info' && (
                            <div className="space-y-6 animate-in slide-in-from-right text-left">
                                <h2 className="text-3xl font-black italic tracking-tighter leading-none">Hulp & Info</h2>
                                <div className="bg-white p-6 rounded-3xl border border-slate-100 shadow-sm">
                                    <h3 className="font-black text-indigo-600 mb-2 uppercase text-xs tracking-wider">Privacy</h3>
                                    <p className="text-xs text-slate-500 leading-relaxed">VibeCheck respecteert jouw privacy. We verkopen je data nooit en gebruiken je lokaal opgeslagen voorkeuren alleen voor een betere ervaring.</p>
                                </div>
                                <div className="bg-white p-6 rounded-3xl border border-slate-100 shadow-sm">
                                    <h3 className="font-black text-green-600 mb-2 uppercase text-xs tracking-wider">Voorwaarden</h3>
                                    <p className="text-xs text-slate-500 leading-relaxed">Punten zijn virtueel en uitsluitend inwisselbaar voor vouchers bij partners. Misbruik van het advertentiesysteem leidt tot uitsluiting.</p>
                                </div>
                                <div onClick={() => alert("Wissen bevestigen in instellingen...")} className="bg-red-50 p-6 rounded-3xl border border-red-100 flex justify-between items-center cursor-pointer active:scale-95 transition-transform">
                                    <span className="text-red-700 font-bold text-sm uppercase">Account & Data Wissen</span>
                                    <Icon name="trash" size={20} className="text-red-400" />
                                </div>
                            </div>
                        )}

                        {view === 'waiting' && (
                            <div className="flex flex-col items-center justify-center py-20 text-center space-y-6 animate-pulse">
                                <Icon name="users" size={64} className="text-indigo-200" />
                                <h2 className="text-2xl font-black px-10 leading-tight uppercase">Wachten op de rest...</h2>
                                <p className="text-slate-400 text-sm px-10">Zodra iedereen zijn swipes heeft gedaan, verschijnt de match hier automatisch!</p>
                            </div>
                        )}
                    </main>

                    <footer className="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white/95 backdrop-blur-md border-t border-slate-100 p-4 flex justify-around items-center z-40">
                        <button onClick={() => setView('landing')} className={`flex flex-col items-center space-y-1 transition-all ${['landing', 'swiping', 'lobby'].includes(view) ? 'text-indigo-600 scale-110 font-black' : 'text-slate-300'}`}>
                            <Icon name="heart" size={20} fill={['landing', 'swiping', 'lobby'].includes(view) ? "currentColor" : "none"} />
                            <span className="text-[10px] uppercase">Swipe</span>
                        </button>
                        <button onClick={() => setView('wallet')} className={`flex flex-col items-center space-y-1 transition-all ${['wallet', 'voucher_success'].includes(view) ? 'text-green-600 scale-110 font-black' : 'text-slate-300'}`}>
                            <Icon name="wallet" size={20} fill={['wallet', 'voucher_success'].includes(view) ? "currentColor" : "none"} />
                            <span className="text-[10px] uppercase">Wallet</span>
                        </button>
                        <button onClick={() => setView('info')} className={`flex flex-col items-center space-y-1 transition-all ${view === 'info' ? 'text-slate-900 scale-110 font-black' : 'text-slate-300'}`}>
                            <Icon name="info" size={20} fill={view === 'info' ? "currentColor" : "none"} />
                            <span className="text-[10px] uppercase">Info</span>
                        </button>
                    </footer>

                    {isWatchingAd && (
                        <div className="fixed inset-0 z-50 bg-black/95 backdrop-blur-sm flex flex-col items-center justify-center text-white p-10 animate-in fade-in">
                            <div className="mb-4 text-6xl animate-bounce">üé¨</div>
                            <p className="text-xl font-bold text-center uppercase tracking-tighter">Video Advertentie</p>
                            <p className="text-indigo-400 text-sm font-normal italic mt-2 text-center">Bedankt voor het wachten. Je saldo wordt direct bijgewerkt.</p>
                            <div className="w-48 h-1 bg-white/10 rounded-full mt-12 overflow-hidden">
                                <div className="h-full bg-indigo-500 animate-loading"></div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>